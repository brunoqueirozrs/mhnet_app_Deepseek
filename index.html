<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MHNET Externas ‚Äî Rota & Leads</title>
  <meta name="theme-color" content="#0f766e"/>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="mhnet-logo.png" alt="MHnet Logo" class="logo">
      <div class="brand-text">
        <div class="title">App Rota Lajeado</div>
        <div class="subtitle" id="userInfo">Selecione um vendedor</div>
      </div>
    </div>
    <button id="menuBtn" class="menu-btn" aria-label="menu" onclick="toggleUserMenu()">&#9776;</button>
  </header>

  <!-- Menu de sele√ß√£o de usu√°rio -->
  <div id="userMenu" class="card" style="display:none; position:absolute; top:70px; right:20px; z-index:1000; width:200px;">
    <h3>Selecionar Vendedor</h3>
    <select id="userSelect" style="width:100%; padding:8px; margin-bottom:10px;">
      <option value="">Selecione...</option>
    </select>
    <button class="btn primary" onclick="setLoggedUser()" style="width:100%;">Confirmar</button>
  </div>

  <main class="container" id="mainContent" style="display:none;">
    <section id="dashboard" class="card dashboard">
      <h1>Dashboard</h1>
      <p class="muted">Vis√£o geral das suas atividades em campo</p>

      <div class="grid stats">
        <div class="stat card-sm">
          <div class="stat-title">Total de Leads</div>
          <div class="stat-value" id="statLeads">0</div>
          <div class="stat-sub">novos</div>
        </div>
        <div class="stat card-sm">
          <div class="stat-title">Rotas Realizadas</div>
          <div class="stat-value" id="statRotas">0</div>
          <div class="stat-sub">0.0 km</div>
        </div>
        <div class="stat card-sm">
          <div class="stat-title">Taxa de Convers√£o</div>
          <div class="stat-value" id="statConv">0.0%</div>
          <div class="stat-sub">0 fechados</div>
        </div>
      </div>
    </section>

    <section class="card actions">
      <button class="action-btn blue" onclick="showPage('iniciarRota')">Iniciar Rota</button>
      <button class="action-btn green" onclick="showPage('verLeads')">Ver Leads</button>
      <button class="action-btn purple" onclick="showPage('minhasRotas')">Minhas Rotas</button>
      <!-- NOVO BOT√ÉO DE VENDA -->
      <button class="action-btn orange" onclick="showPage('novaVenda')">Nova Venda</button>
    </section>

    <!-- Nova Venda -->
    <section id="novaVenda" class="card page" style="display:none;">
      <h2>üìÑ Nova Venda - Rodar Contrato</h2>
      <p class="muted">Preencha os dados para gerar o contrato</p>

      <div class="form-row">
        <input type="text" id="vendaNome" placeholder="‚úè Nome completo" required>
        <input type="date" id="vendaNascimento" placeholder="üìÖ Data de nascimento" required>
        <input type="text" id="vendaCPF" placeholder="üî¢ CPF" required>
        <input type="email" id="vendaEmail" placeholder="üìß E-mail (obrigat√≥rio)" required>
        <input type="tel" id="vendaTelefone1" placeholder="üìû Telefone de contato 1" required>
        <input type="tel" id="vendaTelefone2" placeholder="üìû Telefone de contato 2">
        <input type="text" id="vendaEndereco" placeholder="üè† Endere√ßo completo" required>
        <input type="text" id="vendaBairro" placeholder="üìç Bairro" required>
        <input type="text" id="vendaCidade" placeholder="üåé Cidade" value="Lajeado" required>
        <select id="vendaPlano" required>
          <option value="">üåê Plano escolhido</option>
          <option value="100MB">100MB - R$ 99,90</option>
          <option value="200MB">200MB - R$ 129,90</option>
          <option value="300MB">300MB - R$ 159,90</option>
          <option value="500MB">500MB - R$ 199,90</option>
        </select>
        <select id="vendaVencimento" required>
          <option value="">üóì Dia de vencimento</option>
          <option value="5">Dia 5</option>
          <option value="10">Dia 10</option>
          <option value="15">Dia 15</option>
          <option value="20">Dia 20</option>
          <option value="25">Dia 25</option>
        </select>
      </div>

      <div class="row">
        <button class="btn primary" onclick="enviarVenda()">üìã Gerar Contrato</button>
        <button class="btn" onclick="showPage('dashboard')">Voltar</button>
      </div>
    </section>

    <!-- Cadastrar Lead -->
    <section id="cadLead" class="card page" style="display:none;">
      <h2>Leads Captados</h2>
      <p class="muted">Gerencie seus potenciais clientes</p>

      <div class="form-row">
        <input id="leadNome" placeholder="Nome do lead">
        <input id="leadTelefone" placeholder="Telefone/WhatsApp">
        <input id="leadEndereco" placeholder="Endere√ßo (Rua, n¬∫)">
        <input id="leadCidade" placeholder="Cidade" value="Lajeado">
        <input id="leadBairro" placeholder="Bairro">
        <input id="leadProvedor" placeholder="Provedor atual">
        <select id="leadInteresse">
          <option value="ALTO">ALTO</option>
          <option value="MEDIO">M√âDIO</option>
          <option value="BAIXO">BAIXO</option>
        </select>
        <textarea id="leadObs" placeholder="Observa√ß√£o"></textarea>
      </div>

      <div class="row">
        <button class="btn primary" onclick="enviarLead()">Salvar Lead</button>
        <button class="btn" onclick="showPage('dashboard')">Voltar</button>
      </div>
    </section>

    <!-- Iniciar Rota -->
    <section id="iniciarRota" class="card page" style="display:none;">
      <h2>Iniciar Rota</h2>
      <div class="row" style="gap:10px;">
        <button class="btn start" id="startBtn" onclick="startRoute()">Iniciar</button>
        <button class="btn stop" id="stopBtn" onclick="stopRoute()" disabled>Finalizar</button>
      </div>
      <div id="routeInfo" class="muted" style="margin-top:10px;"></div>
      <button class="btn ghost" onclick="showPage('dashboard')">Voltar</button>
    </section>

    <!-- Minhas Rotas -->
    <section id="minhasRotas" class="card page" style="display:none;">
      <h2>Minhas Rotas</h2>
      <div id="listaRotas"></div>
      <button class="btn" onclick="carregarRotas()">Atualizar</button>
      <button class="btn" onclick="showPage('dashboard')">Voltar</button>
    </section>

    <!-- Ver Leads -->
    <section id="verLeads" class="card page" style="display:none;">
      <h2>Leads</h2>
      <input id="searchLead" placeholder="Buscar por nome, telefone ou provedor" oninput="renderLeads()">
      <div id="listaLeads"></div>
      <button class="btn" onclick="showPage('dashboard')">Voltar</button>
    </section>

    <!-- Configura√ß√µes (Gerenciar vendedores) -->
    <section id="configVendedores" class="card page" style="display:none;">
      <h2>Vendedores</h2>
      <input id="novoVend" placeholder="Nome do vendedor">
      <button class="btn" onclick="addNovoVendedor()">Adicionar</button>
      <div id="listaVend"></div>
      <button class="btn" onclick="showPage('dashboard')">Voltar</button>
    </section>

  </main>

  <footer class="footer">
    <small>MHnet ‚Ä¢ App Rota Lajeado</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
